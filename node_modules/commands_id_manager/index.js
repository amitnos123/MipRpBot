const log_writer = require('log_writer');
const constants = require('consts');
const lw = new log_writer(constants.LOG_DIRECTORY_PATH);
const data_manager = require('data_manager');

module.exports = class commands_id_manager extends data_manager {
    /**
     * @constructor
     */
    constructor() {
        super('COMMANDS_ID.json');

        this.dataArr = this.load_data();
    }

    /**
     * Return the id of a givin command by command name
     * @param {string} commandName - Name of the command which the you want the id for
     * @returns The id of the command
     */
    get_id(commandName) {

        const commandId = this.dataArr[commandName];
        if (commandId !== undefined) {
            return commandId;
        } else {
            const newCommandId = create_id(this.dataArr);
            this.dataArr[commandName] = newCommandId;

            this.save_data(this.dataArr);

            return newCommandId;
        }
    }
};

function create_id(dataArr) {
    return Object.keys(dataArr).length.toString();
}